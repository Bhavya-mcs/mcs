<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Gallery - Manibhadra CNC Solutions</title>
    <link rel="icon" type="image/x-icon" href="MCS LOGO ONLY.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            scroll-behavior: smooth;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        /* Lightbox styles */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
        }
        .lightbox-content {
            /* Updated for zoom and pan */
            margin: auto;
            display: block;
            /* Start with constraints */
            width: auto;
            height: auto;
            max-width: 90vw;
            max-height: 90vh;
            /* Setup for transform */
            transform: scale(1) translate(0, 0);
            transition: transform 0.2s ease-out;
            cursor: grab;
        }
        .lightbox-content.panning {
            cursor: grabbing;
            transition: none; /* Make panning instant */
        }
        .lightbox-video {
            max-width: 90%;
            max-height: 90%;
        }
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            z-index: 1002; /* Ensure above nav */
        }
        .lightbox-close:hover,
        .lightbox-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
         /* NEW: Lightbox Navigation */
         .lightbox-nav {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 30px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            -webkit-user-select: none;
            background-color: rgba(0,0,0,0.3);
            z-index: 1001; /* Ensure it's above content */
        }
        .lightbox-next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }
        .lightbox-prev {
            left: 0;
        }
        .lightbox-nav:hover {
            background-color: rgba(0,0,0,0.8);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- UPDATED: Header & Navigation -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container flex items-center justify-between py-4">
            <div class="flex items-center space-x-4">
                <!-- Firms logo and name -->
                <img src="MCS LOGO ONLY.jpg" alt="Manibhadra CNC Solutions Logo" class="h-10 md:h-12 w-auto">
                <!-- Links back to home -->
                <a href="index.html" class="text-xl md:text-2xl font-bold text-gray-900">Manibhadra CNC Solutions</a>
            </div>
            <!-- Desktop Navigation -->
            <div class="hidden md:flex space-x-8">
                <!-- Updated links to point to index.html sections -->
                <a href="index.html#about" class="text-gray-600 hover:text-red-700 font-medium transition-colors">About Us</a>
                <a href="index.html#services" class="text-gray-600 hover:text-red-700 font-medium transition-colors">Services</a>
                <a href="index.html#Gallery" class="text-gray-600 hover:text-red-700 font-medium transition-colors">Gallery</a>
                <a href="#contact" class="text-gray-600 hover:text-red-700 font-medium transition-colors">Contact</a>
            </div>
            <!-- Mobile Menu Button -->
            <button id="hamburger-button" class="md:hidden flex items-center px-3 py-2 border rounded text-gray-500 border-gray-400 hover:text-gray-800 hover:border-gray-800">
                <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </nav>
        <!-- Mobile Menu (UPDATED TO RED) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg py-4 transition-all duration-300 ease-in-out">
            <div class="flex flex-col items-center space-y-4">
                <!-- Updated links for mobile -->
                <a href="index.html#about" class="mobile-link text-gray-600 hover:text-red-700 font-medium transition-colors w-full text-center py-2">About Us</a>
                <a href="index.html#services" class="mobile-link text-gray-600 hover:text-red-700 font-medium transition-colors w-full text-center py-2">Services</a>
                <a href="index.html#Gallery" class="mobile-link text-gray-600 hover:text-red-700 font-medium transition-colors w-full text-center py-2">Gallery</a>
                <a href="#contact" class="mobile-link text-gray-600 hover:text-red-700 font-medium transition-colors w-full text-center py-2">Contact</a>
            </div>
        </div>
    </header>

    <main>
        <!-- Gallery Section -->
        <section id="gallery" class="py-16 bg-white">
            <div class="container">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 mb-4">2D Design Gallery</h2>
                <p class="text-lg text-gray-600 text-center mb-12 max-w-2xl mx-auto">Explore our portfolio of 2D jali screens, wall panels, and precision-cut designs.</p>

                <div class="columns-2 md:columns-3 lg:columns-4 gap-6 space-y-6">
                    <!-- Gallery Images and Videos -->
                    <img src="a1.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a2.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a3.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a4.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a5.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a6.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a7.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a8.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a9.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a10.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a12.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a13.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a14.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a15.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a16.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <img src="a17.jpg" alt="CNC Project" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none';">
                    <video controls src="a18.mp4" class="gallery-item w-full h-auto rounded-xl shadow-md cursor-pointer transition-transform transform hover:scale-105" onerror="this.style.display='none'">Video not found</video>
                </div>
            </div>
        </section>

        <!-- The Lightbox Modal -->
        <div id="lightbox" class="lightbox">
            <span class="lightbox-close" id="closeBtn">&times;</span>
            
            <!-- NEW: Navigation Buttons -->
            <a class="lightbox-nav lightbox-prev" id="lightboxPrev" style="display: none;">&#10094;</a>
            <a class="lightbox-nav lightbox-next" id="lightboxNext" style="display: none;">&#10095;</a>

            <div id="lightbox-content-container">
                <img class="lightbox-content" id="lightboxImg" style="display: none;">
                <video class="lightbox-content lightbox-video" id="lightboxVideo" controls style="display: none;"></video>
            </div>
        </div>

        <!-- Contact Section -->
        <section id="contact" class="py-16 bg-gray-100">
            <div class="container text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Contact Us</h2>
                <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
                    Get in touch with our team to discuss your project and bring your artistic vision to life.
                </p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-6 md:space-y-0 md:space-x-8">
                    <!-- Contact Card 1 (UPDATED TO RED) -->
                    <div class="bg-white p-8 rounded-2xl shadow-lg w-full md:w-1/2">
                        <h3 class="text-2xl font-bold text-red-700 mb-2">Asit Mehta</h3>
                        <p class="text-lg text-gray-700">Founder</p>
                        <a href="tel:+919660499044" class="block mt-4 text-red-700 hover:text-red-900 transition-colors text-lg font-medium">
                            +91 96604 99044
                        </a>
                    </div>
                    <!-- Contact Card 2 (UPDATED TO RED) -->
                    <div class="bg-white p-8 rounded-2xl shadow-lg w-full md:w-1/2">
                        <h3 class="text-2xl font-bold text-red-700 mb-2">Bhavya Mehta</h3>
                        <p class="text-lg text-gray-700">Co-Founder</p>
                        <a href="tel:+918619212179" class="block mt-4 text-red-700 hover:text-red-900 transition-colors text-lg font-medium">
                            +91 86192 12179
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container text-center">
            <p>&copy; 2021-2025 Manibhadra CNC Solutions. All Rights Reserved.</p>
            <p class="text-sm mt-2">Steel Bhawan and Electronic Complex, 28A, Light Industrial Area, adjacent Lane of Fresh and Green, Shastri Nagar, Jodhpur, Rajasthan 342003</p>
            
            <!-- UPDATED: Social and Map Links -->
            <div class="flex justify-center items-center mt-6 space-x-6">
                <!-- WhatsApp Link -->
                <a href="https://whatsapp.com/channel/0029VaiUXmV4Y9lpi0Ao570h" target="_blank" rel="noopener noreferrer" class="opacity-75 hover:opacity-100 transition-opacity">
                    <span class="sr-only">WhatsApp</span>
                    <img src="whatsapp.png" alt="WhatsApp" class="w-7 h-7">
                </a>
                
                <!-- Instagram Link -->
                <a href="https://www.instagram.com/manibhadracnc?igsh=M25uamk0NHJqbGF5" target="_blank" rel="noopener noreferrer" class="opacity-75 hover:opacity-100 transition-opacity">
                    <span class="sr-only">Instagram</span>
                    <img src="insta.png" alt="Instagram" class="w-7 h-7">
                </a>

                <!-- Google Maps Link -->
                <a href="https://maps.app.goo.gl/Bnd1Nz7vFM3FyeiaA" target="_blank" rel="noopener noreferrer" class="opacity-75 hover:opacity-100 transition-opacity">
                    <span class="sr-only">Our Location</span>
                    <img src="map.png" alt="Location Pin" class="w-5 h-7">
                </a>
            </div>

        </div>
    </footer>
    
    <!-- UPDATED: Lightbox Script -->
    <script>
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxVideo = document.getElementById('lightboxVideo');
        const closeBtn = document.getElementById('closeBtn');
        const prevBtn = document.getElementById('lightboxPrev');
        const nextBtn = document.getElementById('lightboxNext');

        // const galleryItems = []; // OLD
        const galleryItemsNodeList = document.querySelectorAll('.gallery-item');
        const galleryItems = Array.from(galleryItemsNodeList); // Convert NodeList to Array
        let currentIndex = 0;

        // --- Zoom and Pan Variables ---
        let scale = 1;
        let isPanning = false;
        let startPan = { x: 0, y: 0 };
        let currentTranslate = { x: 0, y: 0 };
        let lastTranslate = { x: 0, y: 0 };
        // ------------------------------

        // Function to reset image transform
        function resetImageTransform() {
            scale = 1;
            currentTranslate = { x: 0, y: 0 };
            lastTranslate = { x: 0, y: 0 };
            lightboxImg.style.transform = 'scale(1) translate(0px, 0px)';
            lightboxImg.style.maxWidth = '90vw';
            lightboxImg.style.maxHeight = '90vh';
            lightboxImg.style.transition = 'transform 0.2s ease-out';
            lightboxImg.classList.remove('panning');
        }

        // --- Show Item Function ---
        function showItem(index) {
            // Wrap around
            if (index >= galleryItems.length) {
                index = 0;
            }
            if (index < 0) {
                index = galleryItems.length - 1;
            }
            
            currentIndex = index;
            const item = galleryItems[currentIndex];

            if (item.tagName === 'IMG') {
                resetImageTransform(); // Reset transform for new image
                lightboxImg.src = item.src;
                lightboxImg.style.display = 'block';
                lightboxVideo.style.display = 'none';
                lightboxVideo.pause();
            } else if (item.tagName === 'VIDEO') {
                resetImageTransform(); // Also reset for videos to hide img
                lightboxVideo.src = item.src;
                lightboxVideo.style.display = 'block';
                lightboxImg.style.display = 'none';
                lightboxVideo.play();
            }
        }

        // --- Open Lightbox ---
        // document.querySelectorAll('.gallery-item').forEach((item, index) => { // OLD
        galleryItems.forEach((item, index) => { // NEW: Iterate over the array
            // Populate the galleryItems array
            // galleryItems.push(item); // OLD
            
            item.addEventListener('click', () => {
                lightbox.style.display = 'flex';
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
                showItem(index);
            });
        });

        // --- Close Lightbox ---
        function closeLightbox() {
            lightbox.style.display = 'none';
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            lightboxVideo.pause();
            resetImageTransform(); // Reset transform on close
        }

        closeBtn.addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', (e) => {
            if (e.target.id === 'lightbox' || e.target.id === 'lightbox-content-container') {
                closeLightbox();
            }
        });

        // --- Navigation Button Listeners ---
        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent lightbox click-to-close
            showItem(currentIndex - 1);
        });

        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent lightbox click-to-close
            showItem(currentIndex + 1);
        });


        // --- Panning Logic (Mouse) ---
        lightboxImg.addEventListener('mousedown', (e) => {
            if (e.button !== 0) return; // Only pan on left click
            e.preventDefault();
            isPanning = true;
            startPan.x = e.clientX - lastTranslate.x;
            startPan.y = e.clientY - lastTranslate.y;
            lightboxImg.classList.add('panning');
        });

        lightboxImg.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            e.preventDefault();
            currentTranslate.x = e.clientX - startPan.x;
            currentTranslate.y = e.clientY - startPan.y;
            lightboxImg.style.transform = `scale(${scale}) translate(${currentTranslate.x}px, ${currentTranslate.y}px)`;
        });

        function endPan() {
            if (!isPanning) return;
            isPanning = false;
            lastTranslate.x = currentTranslate.x;
            lastTranslate.y = currentTranslate.y;
            lightboxImg.classList.remove('panning');
        }

        lightboxImg.addEventListener('mouseup', endPan);
        lightboxImg.addEventListener('mouseleave', endPan);

        // --- Zoom Logic (Mouse Wheel) ---
        lightbox.addEventListener('wheel', (e) => {
            if (lightboxImg.style.display !== 'block') return; // Don't zoom if video is playing

            e.preventDefault();
            const zoomSpeed = 0.1;
            const oldScale = scale;

            if (e.deltaY < 0) {
                scale += zoomSpeed;
            } else {
                scale -= zoomSpeed;
            }
            
            scale = Math.max(1, Math.min(scale, 5)); // Clamp scale (min 1x, max 5x)

            if (scale === 1) {
                // Reset to center
                resetImageTransform();
            } else {
                // Allow image to be its full size (or bigger)
                lightboxImg.style.maxWidth = 'none';
                lightboxImg.style.maxHeight = 'none';

                // --- Zoom centered on mouse pointer ---
                const rect = lightboxImg.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // Calculate new translation
                const newTranslateX = (currentTranslate.x * scale / oldScale) - (mouseX * (scale / oldScale - 1));
                const newTranslateY = (currentTranslate.y * scale / oldScale) - (mouseY * (scale / oldScale - 1));

                currentTranslate.x = newTranslateX;
                currentTranslate.y = newTranslateY;
                lastTranslate.x = newTranslateX;
                lastTranslate.y = newTranslateY;

                lightboxImg.style.transform = `scale(${scale}) translate(${currentTranslate.x}px, ${currentTranslate.y}px)`;
            }
        });


        // Mobile menu functionality
        const hamburgerButton = document.getElementById('hamburger-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');

        if(hamburgerButton) {
            hamburgerButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });
    </script>
</body>
</html>


